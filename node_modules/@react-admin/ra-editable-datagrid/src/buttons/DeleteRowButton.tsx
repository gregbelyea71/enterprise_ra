import * as React from 'react';
import { getMutationMode, Identifier, MutationMode, Record } from 'react-admin';
import { DeleteWithConfirmIconButton } from './DeleteWithConfirmIconButton';
import { DeleteWithUndoIconButton } from './DeleteWithUndoIconButton';

export const DeleteRowButton = ({
    mutationMode,
    undoable,
    ...rest
}: DeleteRowButtonProps) => {
    const mode = getMutationMode(mutationMode, undoable);
    return mode === 'undoable' ? (
        <DeleteWithUndoIconButton {...rest} />
    ) : (
        <DeleteWithConfirmIconButton
            mutationMode={mode}
            undoable={undoable}
            {...rest}
        />
    );
};

export interface DeleteRowButtonProps {
    id?: Identifier;
    mutationMode?: MutationMode;
    record?: Record;
    resource?: string;
    undoable?: boolean;
}

export default DeleteRowButton;
